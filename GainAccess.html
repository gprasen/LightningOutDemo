<html>
<head>
    <script>
        function loadLightningOut() {
            const script = document.createElement('script');
            script.src = "https://myadp--fit.sandbox.my.site.com/lightningoutpoc/lightning/lightning.out.js";
            script.onload = initializeLightningOut;
            script.onerror = function() {
                console.error('Failed to load Lightning Out script from', script.src);
            };
            document.head.appendChild(script);
        }

        function initializeLightningOut() {
            const appName = 'c:GenAIApp';
            const componentName = 'c:genEmail';
            const lightningEndpoint = 'https://myadp--fit.sandbox.my.site.com';
            const targetElement = document.querySelector("[data-lightning-out]");
            const componentAttributes = {};

            if (typeof $Lightning === 'undefined') {
                console.error('$Lightning is not defined. Ensure the script URL is correct and accessible.');
                return;
            }

            $Lightning.use(
                appName,
                function() {
                    $Lightning.createComponent(
                        componentName,
                        componentAttributes,
                        targetElement,
                        function(cmp) {
                            console.log('Lightning component created');
                        }
                    );
                },
                lightningEndpoint
            );
        }

        document.addEventListener("DOMContentLoaded", loadLightningOut);
    </script>
</head>
<body>
    <div data-lightning-out="true"></div>
</body>
</html>
